<!doctype html>
<html lang="">
<head>
	<meta charset="utf-8"/>
	<title>Refactoring Bad Code - Python Programming for Data Science</title>
	<meta name="author" content="Lucas Ho">


	<meta name="description" content="I have been learning Python for a while. I recently have looked back my old labs and projects and noticed that I had written bad codes which caused memory waste, the server need more time to run. Thus, I want to summarize some bad coding habits to help you to …">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link rel="stylesheet" href=" https://lucashomil.github.io/datascience/theme/css/main.css" type="text/css" />


    <link href=" https://lucashomil.github.io/datascience/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Python Programming for Data Science Atom Feed" />
</head>

<body>

    <div class="container">

	  <header role="banner">
	    <div class="feeds">
	        <a href=" https://lucashomil.github.io/datascience/feeds/all.atom.xml" rel="alternate"><img src=" https://lucashomil.github.io/datascience/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
	      </nav>
		<a href=" https://lucashomil.github.io/datascience" class="title">Python Programming for Data Science</a>
      </header>

	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Refactoring Bad Code</h1>
		
<div class="metadata">
  <time datetime="2019-07-27T10:20:00-04:00" pubdate>Sat 27 July 2019</time>
    <address class="vcard author">
      by <a class="url fn" href=" https://lucashomil.github.io/datascience/author/lucas-ho.html">Lucas Ho</a>
    </address>
  in <a href=" https://lucashomil.github.io/datascience/category/python.html">Python</a>
<p class="tags">tagged <a href=" https://lucashomil.github.io/datascience/tag/python.html">python</a></p></div>		
		<p>I have been learning Python for a while. I recently have looked back my old labs and projects and noticed that I had written bad codes which caused memory waste, the server need more time to run. Thus, I want to summarize some bad coding habits to help you to stay away from these bad habits.</p>
<p>In the examples below, some will cause performance issues, and lead to hidden bugs or difficulties in future maintenance.</p>
<h3>1. Reasonably variable names</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="c1"># Variable names are hard to understand</span>

<span class="n">y1</span> <span class="o">=</span> <span class="s1">&#39;2018&#39;</span>

<span class="n">t</span> <span class="o">=</span> <span class="s1">&#39;16/07/2019&#39;</span>

<span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="n">review_year</span> <span class="o">=</span> <span class="s1">&#39;2018&#39;</span>

<span class="n">review_date</span> <span class="o">=</span> <span class="s1">&#39;16/07/2019&#39;</span>

<span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
</pre></div>


<p>After the bad code was fixed, others could understand my code easier. And, it is easy to maintain the code.</p>
<h3>2. Shortage "for" loop</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="c1"># Should use &quot;enmerate&quot; insted of long code</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)),</span> <span class="n">numbers</span><span class="p">):</span>

    <span class="k">print</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">0</span> <span class="mi">1</span>
<span class="mi">1</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">3</span>
<span class="mi">3</span> <span class="mi">4</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>

    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">0</span> <span class="mi">1</span>
<span class="mi">1</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">3</span>
<span class="mi">3</span> <span class="mi">4</span>
</pre></div>


<p>Now, the fixed code was proven, and easier to read.</p>
<h3>3. Lambda function</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="c1"># Too many characters and long code</span>

<span class="k">def</span> <span class="nf">even_fn</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">return</span> <span class="bp">False</span>

<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">even_fn</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">40</span><span class="p">))))</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">38</span><span class="p">]</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="c1"># Transforming into this one-liner</span>

<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">40</span><span class="p">))))</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">38</span><span class="p">]</span>
</pre></div>


<p>"lambda" functionis very useful, but can only have one expression.</p>
<h3>4. List Comprehension</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="c1"># the length of the code is too long.</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">new_list_numbers</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>

    <span class="n">new_list_numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">new_list_numbers</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="n">new_list_numberss</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">]</span>

<span class="n">new_list_numberss</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
</pre></div>


<p>The power of list comprehensions is to provide a concise way to create lists.</p>
<h3>5. If statement</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="c1"># long code</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a number: &quot;</span><span class="p">)</span>

<span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{x} is less than {y}&quot;</span><span class="p">)</span>

<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{x} is equal to {y}&quot;</span><span class="p">)</span>

<span class="k">else</span><span class="p">:</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{x} is more than {y}&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="n">a</span> <span class="nb">number</span><span class="p">:</span> <span class="mi">15</span>
<span class="mi">10</span> <span class="k">is</span> <span class="k">less</span> <span class="k">than</span> <span class="mi">15</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a number:&quot;</span><span class="p">))</span>

<span class="n">equality</span> <span class="o">=</span> <span class="s2">&quot;is equal to&quot;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="k">else</span> <span class="s2">&quot;is less than&quot;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="k">else</span> <span class="s2">&quot;is more than&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{x} {equality} {y}&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="n">a</span> <span class="nb">number</span><span class="p">:</span><span class="mi">15</span>
<span class="mi">10</span> <span class="k">is</span> <span class="k">less</span> <span class="k">than</span> <span class="mi">15</span>
</pre></div>


<p>This is another way how to use "if" statement briefly</p>
<h3>6. Good comments</h3>
<div class="highlight"><pre><span></span><span class="c1"># useless comment</span>

<span class="n">k</span> <span class="o">=</span> <span class="mi">30</span>                       <span class="c1"># assigning k a value of 30</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># helpful comment</span>

<span class="n">salestax_10</span> <span class="o">=</span> <span class="mf">1.10</span>            <span class="c1"># defining a sales tax of 10%</span>

<span class="n">salestax_20</span> <span class="o">=</span> <span class="mf">1.20</span>            <span class="c1"># defining a sales tax of 20%</span>
</pre></div>


<p>Commenting is an important skill that needs to be learned. Commenting our code helps us to explain our thoughts process, and others to understand the code flow.</p>
<h3>7. Line Continuations</h3>
<div class="highlight"><pre><span></span><span class="c1"># Worst practice</span>

<span class="n">new_columns_dict_sat_2017</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Participation&#39;</span><span class="p">:</span><span class="s1">&#39;part_sat_2017&#39;</span><span class="p">,</span> <span class="s1">&#39;Evidence-Based Reading and Writing&#39;</span><span class="p">:</span><span class="s1">&#39;proficiency_2017&#39;</span><span class="p">,</span> <span class="s1">&#39;Math&#39;</span><span class="p">:</span><span class="s1">&#39;math_sat_2017&#39;</span><span class="p">,</span> <span class="s1">&#39;Total&#39;</span><span class="p">:</span><span class="s1">&#39;total_sat_2017&#39;</span><span class="p">}</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Fixed practice</span>

<span class="n">new_columns_dict_sat_2017</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Participation&#39;</span><span class="p">:</span><span class="s1">&#39;part_sat_2017&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;Evidence-Based Reading and Writing&#39;</span><span class="p">:</span><span class="s1">&#39;proficiency_2017&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;Math&#39;</span><span class="p">:</span><span class="s1">&#39;math_sat_2017&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;Total&#39;</span><span class="p">:</span><span class="s1">&#39;total_sat_2017&#39;</span>
                            <span class="p">}</span>
</pre></div>


<p>Making code flow is more organized and easy to understand</p>
<h4>Python is not a difficult language to learn. However, it's also easy to have bad habits in Python coding. The above examples are only a small part of bad practices and I hope you can avoid those bad practices. If there is anything you like to share, please feel free to contact me.</h4>
<p><img alt="png" src="images/happy-quotes-psdthe-secret.png"></p>	

	</article>

    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>


		  </div>

		  <div class="sidebar">

	        <nav>
	          <h2>Categories</h2>
	          <ul>
	              <li class="active"><a href=" https://lucashomil.github.io/datascience/category/python.html">Python</a></li>
	              <li ><a href=" https://lucashomil.github.io/datascience/category/sql.html">SQL</a></li>
	          </ul>
	        </nav>

	          <aside>
	          <h2>Social</h2>
			    <ul class="social">
				  <li><a href="https://github.com/lucashomil">Github</a><i></i></li>
				  <li><a href="https://www.linkedin.com/in/lucas-ho-93b5ba9b/">Linkedin</a><i></i></li>
			    </ul>
			  </aside>


		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  © 2019 Lucas Ho - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/"></a>pelican-simplegrey</a>.
    </p>

	  </footer>

	</div>


</body>
</html>